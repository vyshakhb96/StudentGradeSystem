@model IEnumerable<MVCLibraries.Student>
<br />

<p>
    @*@Html.ActionLink("Add New Student", "Create", "Student", new { @class = "btn btn-success" })*@
    <button type="button" class="btn btn-primary" onclick="createStudent()">Create</button>
</p>


<table id="studtable_id" class="table table-striped table-bordered dt-responsive nowrap">
    <thead style="background-color: #1C2833; color: white">
        <tr>
            <th>Register Number</th>
            <th>Name</th>
            <th>Date of Birth</th>
            <th>Standard</th>
            <th>Mathematics</th>
            <th>Physics</th>
            <th>Chemistry</th>
            <th>Overall Grade</th>
            <th>Actions</th>
        </tr>
    </thead>
</table>


    <div class="modal fade" id="dataModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" id="dataModalBody">


            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
    <script>
        var dataTable;
        $(document).ready(function () {
            dataTable = $('#studtable_id').DataTable({
                "ajax": {
                    url: "/Student/GetData",
                    type: "POST",
                    dataType: "json"
                },
                columns: [
                    { 'data': 'Regnum', 'name': "Regnum" },
                    { 'data': 'Name', 'name': "Name" },
                    { 'data': 'Dob', 'name': "Dob" },
                    { 'data': 'Standard', 'name': "Standard" },
                    { 'data': 'Mathematics', 'name': "Mathematics" },
                    { 'data': 'Physics', 'name': "Physics" },
                    { 'data': 'Chemistry', 'name': "Chemistry" },
                    { 'data': 'Grade', 'name': "Grade" },
                    {
                        'data': 'Id', 'render': function (data) {
                            return '<button class="btn btn-warning" onclick="getValues(' + data + ')" >View</button>  <button class="btn btn-danger" onclick="Delete(' + data + ')"> Delete</button>';
                        }
                    }
                ],
                "serverSide": "true",
                "order": [0, "asc"],
                "processing": "true"
            });
        });

        function getValues(id) {
            $.get("/Student/Edit", { id: id }, function (res) {
                $('#dataModalBody').html(res);
                $('#dataModal').modal('show');
            })
        }

        function Delete(id) {
            $.get("/Student/Delete", { id: id }, function (res) {
                if (res) {
                    $('#dataModalBody').html(res);
                    $('#dataModal').modal('show');
                    dataTable.ajax.reload();
                }
            })
        }

        function DeleteStudent() {
            var modal = $("#dataModal");
            var form = $('form[name="deleteForm"]');
            var data = form.serialize();
            $.post("/Student/Delete", data, function (res) {
                if (res) {
                    modal.modal('hide');
                    dataTable.ajax.reload();
                }
            })
        }

        function CreateOrUpdate() {
            var modal = $("#dataModal");
            var form = $('form[name="dataForm"]');
            var data = form.serialize();
            $.post("/Student/CreateOrUpdateStudent", data, function (res) {
                if (res) {
                    modal.modal('hide');
                    dataTable.ajax.reload();
                }
            })
        }

        function createStudent() {
            $.get("/Student/Create", function (res) {
                $('#dataModalBody').html(res);
                $('#dataModal').modal('show');
                document.getElementById("reg").disabled = false;
                document.getElementById("name").disabled = false;
                document.getElementById("dob").disabled = false;
                document.getElementById("dob").type = "date";
                document.getElementById("Standard").disabled = false;
                document.getElementById("maths").disabled = false;
                document.getElementById("physics").disabled = false;
                document.getElementById("chemistry").disabled = false;
                btnEdit.style.visibility = 'hidden';
                document.getElementById("ViewModalLabel").innerHTML = "CREATE STUDENT";
                $("#btnSave").show();

            })
        }

        function disable() {
            document.getElementById("reg").disabled = false;
            document.getElementById("name").disabled = false;
            document.getElementById("dob").disabled = false;
            document.getElementById("Standard").disabled = false;
            document.getElementById("maths").disabled = false;
            document.getElementById("physics").disabled = false;
            document.getElementById("chemistry").disabled = false;
            btnEdit.style.visibility = 'hidden';
            $("#btnSave").show();
            document.getElementById("ViewModalLabel").innerHTML = "EDIT STUDENT";
        }

       
    </script>
